import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,b as t,o as a}from"./app-CYEtCzW4.js";const s={};function n(h,e){return a(),r("div",null,[...e[0]||(e[0]=[t('<p>hexo引入图片的方式有很多种：</p><ul><li>从本地文件加载。</li><li>使用图床，markdown中直接引用图床的链接。</li></ul><h3 id="_1-问题描述" tabindex="-1"><a class="header-anchor" href="#_1-问题描述"><span>1.问题描述</span></a></h3><p>Hexo使用图床的方式加载在blog中加载图片，会在非本人的电脑或者手机端报“html访问图片资源403问题(http referrer)”，导致采用图床方式加载的图片全部无法加载。</p><h3 id="_2-问题原因" tabindex="-1"><a class="header-anchor" href="#_2-问题原因"><span>2.问题原因</span></a></h3><p>http请求体的header中有一个referrer字段，用来表示发起http请求的源地址信息，这个referrer信息是可以省略但是不可修改的，就是说你只能设置是否带上这个referrer信息，不能定制referrer里面的值。</p><p>服务器端在拿到这个referrer值后就可以进行相关的处理，比如图片资源，可以通过referrer值判断请求是否来自本站，若不是则返回403或者重定向返回其他信息，从而实现图片的防盗链。上面出现403就是因为，请求的是别人服务器上的资源，但把自己的referrer信息带过去了，被对方服务器拦截返回了403。</p><p>在前端可以通过meta来设置referrer policy(来源策略)，具体可以设置哪些值以及对应的结果参考<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FReferrer-Policy" target="_blank" rel="noopener noreferrer">这里</a>。所以针对上面的403情况的解决方法，就是把referrer设置成<code>no-referrer</code>，这样发送请求不会带上referrer信息，对方服务器也就无法拦截了。</p><p>浏览器中referrer默认的值是<code>no-referrer-when-downgrade</code>，就是除了降级请求的情况以外都会带上referrer信息。降级请求是指https协议的地址去请求http协议，所以上面403的情况还有另一种解决方法就是，请求的图片地址换成http协议，自己的地址使用http协议，这样降级请求也不会带上referrer。</p><h3 id="_3-解决办法" tabindex="-1"><a class="header-anchor" href="#_3-解决办法"><span>3.解决办法</span></a></h3><h4 id="_3-1-butterfly主题" tabindex="-1"><a class="header-anchor" href="#_3-1-butterfly主题"><span>3.1 butterfly主题</span></a></h4><p>在D:\\blog\\themes\\butterfly\\layout\\includes目录下有一个head.pug文件，修改该文件的meta信息，会使生成的所有页面都带有该head。在head.pug文件中添加如下内容，结果参见图片。</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">meta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;referrer&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> content</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;no-referrer&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://blog-1375630728.cos.ap-beijing.myqcloud.com/imgs/image-20250904104351062.png" alt="image-20250904104351062" tabindex="0" loading="lazy"><figcaption>image-20250904104351062</figcaption></figure><p>butterfly添加头.png</p><h4 id="_3-2-yilia主题" tabindex="-1"><a class="header-anchor" href="#_3-2-yilia主题"><span>3.2 yilia主题</span></a></h4><p>在G:\\blog\\themes\\yilia\\layout_partial目录下有一个head.ejs，同样在head.ejs文件中添加如下meta信息即可</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">meta</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;referrer&quot;</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> content</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;no-referrer&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-结果" tabindex="-1"><a class="header-anchor" href="#_4-结果"><span>4.结果</span></a></h3><div class="language-undefined line-numbers-mode" data-highlighter="shiki" data-ext="undefined" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-undefined"><span class="line"><span>使用hexo g 重新生成一下工程</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在G:\\blog\\public\\2021目录下就是所有21年生成的blog，找到该目录下的任意一个index.html，用文本编辑器打开就可以看到已经自动生成了referrer标签了。</p><figure><img src="https://blog-1375630728.cos.ap-beijing.myqcloud.com/imgs/13838098-34cdaee390f1a3dd.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>生成的html中包含有referrer头.png</p><p>然后使用hexo d指令将工程同步到github即可</p>',24)])])}const p=i(s,[["render",n]]),d=JSON.parse('{"path":"/posts/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/%E8%A7%A3%E5%86%B3hexo%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%BA%8A%E5%9B%BE%E7%89%87%E9%97%AE%E9%A2%98.html","title":"解决hexo无法显示图床图片问题","lang":"zh-CN","frontmatter":{"title":"解决hexo无法显示图床图片问题","tags":["hexo"],"categories":["hexo博客"],"abbrlink":"24f770ca","date":"2025-09-04T10:39:21.000Z","description":"hexo引入图片的方式有很多种： 从本地文件加载。 使用图床，markdown中直接引用图床的链接。 1.问题描述 Hexo使用图床的方式加载在blog中加载图片，会在非本人的电脑或者手机端报“html访问图片资源403问题(http referrer)”，导致采用图床方式加载的图片全部无法加载。 2.问题原因 http请求体的header中有一个re...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"解决hexo无法显示图床图片问题\\",\\"image\\":[\\"https://blog-1375630728.cos.ap-beijing.myqcloud.com/imgs/image-20250904104351062.png\\",\\"https://blog-1375630728.cos.ap-beijing.myqcloud.com/imgs/13838098-34cdaee390f1a3dd.png\\"],\\"datePublished\\":\\"2025-09-04T10:39:21.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"reallylearning\\",\\"url\\":\\"https://github.com/Reallylearning\\"}]}"],["meta",{"property":"og:url","content":"https://reallylearning.icu/posts/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/%E8%A7%A3%E5%86%B3hexo%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%BA%8A%E5%9B%BE%E7%89%87%E9%97%AE%E9%A2%98.html"}],["meta",{"property":"og:site_name","content":"计算机学习记录"}],["meta",{"property":"og:title","content":"解决hexo无法显示图床图片问题"}],["meta",{"property":"og:description","content":"hexo引入图片的方式有很多种： 从本地文件加载。 使用图床，markdown中直接引用图床的链接。 1.问题描述 Hexo使用图床的方式加载在blog中加载图片，会在非本人的电脑或者手机端报“html访问图片资源403问题(http referrer)”，导致采用图床方式加载的图片全部无法加载。 2.问题原因 http请求体的header中有一个re..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://blog-1375630728.cos.ap-beijing.myqcloud.com/imgs/image-20250904104351062.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"hexo"}],["meta",{"property":"article:published_time","content":"2025-09-04T10:39:21.000Z"}]]},"git":{},"readingTime":{"minutes":2.53,"words":759},"filePathRelative":"posts/hexo博客搭建/解决hexo无法显示图床图片问题.md","excerpt":"<p>hexo引入图片的方式有很多种：</p>\\n<ul>\\n<li>从本地文件加载。</li>\\n<li>使用图床，markdown中直接引用图床的链接。</li>\\n</ul>\\n<h3>1.问题描述</h3>\\n<p>Hexo使用图床的方式加载在blog中加载图片，会在非本人的电脑或者手机端报“html访问图片资源403问题(http referrer)”，导致采用图床方式加载的图片全部无法加载。</p>\\n<h3>2.问题原因</h3>\\n<p>http请求体的header中有一个referrer字段，用来表示发起http请求的源地址信息，这个referrer信息是可以省略但是不可修改的，就是说你只能设置是否带上这个referrer信息，不能定制referrer里面的值。</p>","autoDesc":true}');export{p as comp,d as data};
